<!DOCTYPE html>
<html>
<head>
    <title>Laporan Keuangan</title>
    <!-- Link ke Bootstrap CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">

<!-- Link ke jQuery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>


<!-- Bootstrap Datepicker CSS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css">

<!-- jQuery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<!-- Bootstrap Datepicker JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>



    <style>
        


        
        
body {
margin: 0;
padding: 0;
font-family: 'Exo', sans-serif;
font-size: 16px;
line-height: 1.5;
max-width: 1200px;
margin: 0 auto;
box-sizing: border-box;margin: auto;
font-family: -apple-system, BlinkMacSystemFont, sans-serif;
overflow: auto;
background: linear-gradient(315deg, #f9fd50 3%, #fff6a2 38%, #EFAA52 68%, #f9d00f 98%);
animation: gradient 10s ease infinite;
background-size: 400% 400%;
background-attachment: fixed;
}

@keyframes gradient {
0% {
    background-position: 0% 0%;
}
50% {
    background-position: 100% 100%;
}
100% {
    background-position: 0% 0%;
}
}

.wave {
background: rgb(255 255 255 / 25%);
border-radius: 1000% 1000% 0 0;
position: fixed;
width: 200%;
height: 12em;
animation: wave 10s -3s linear infinite;
transform: translate3d(0, 0, 0);
opacity: 0.8;
bottom: 0;
left: 0;
z-index: -1;
}

.wave:nth-of-type(2) {
bottom: -1.25em;
animation: wave 18s linear reverse infinite;
opacity: 0.8;
}

.wave:nth-of-type(3) {
bottom: -2.5em;
animation: wave 20s -1s reverse infinite;
opacity: 0.9;
}

@keyframes wave {
2% {
    transform: translateX(1);
}

25% {
    transform: translateX(-25%);
}

50% {
    transform: translateX(-50%);
}

75% {
    transform: translateX(-25%);
}

100% {
    transform: translateX(1);
}
}



form {
display: flex;
flex-direction: column;
align-items: center;
margin: 20px;
font-family: 'Exo', sans-serif;
font-size: 16px;
color: #333;
}

label {
margin-bottom: 10px;
font-weight: bold;
}

input[type="text"] {
padding: 10px;
border: 1px solid #ccc;
border-radius: 5px;
box-shadow: none;
font-size: 16px;
width: 100%;
margin-bottom: 20px;
}

.input-group {
display: flex;
justify-content: center;
align-items: center;
}

.input-group-append {
margin-left: -1px;
}

.btn {
border-radius: 5px;
font-size: 16px;
padding: 10px;
margin-right: 10px;
border: none;
color: #fff;
cursor: pointer;
transition: all 0.3s ease;
}

.btn-primary {
background-color: #007bff;
}

.btn-primary:hover {
background-color: #0062cc;
}

.btn-danger {
background-color: #dc3545;
}

.btn-danger:hover {
background-color: #c82333;
}

.whatsapp-button {
background-color: #25d366;
}

.whatsapp-button:hover {
background-color: #128c7e;
}

table {
border-collapse: collapse;
width: 100%;
margin-top: 20px;
}

th, td {
text-align: left;
padding: 8px;
}

th {
background-color: #007bff;
color: #fff;
}

tfoot td.total {
font-weight: bold;
}

tfoot td#total-harga {
text-align: right;
font-weight: bold;
}

.blink-black {
animation: blink 1s ease infinite;
}

@keyframes blink {
0% {
color: #333;
}
50% {
color: #fff;
}
100% {
color: #333;
}
}

.datepicker {
transform: translate(+225%, -10%);
left: 100%;
top: 100%;
}







    
    </style>
</head>
<body>

    <div>
        <div class="wave"></div>
        <div class="wave"></div>
        <div class="wave"></div>
     </div>

    <form>
        <div class="form-group text-center">
          <label for="tanggal">Tanggal:</label>
          <input type="text" class="form-control" id="tanggal" name="tanggal">
        </div>
      
        <div class="form-group text-center">
          <label for="deskripsi">Deskripsi Belanja:</label>
          <div class="input-group">
            <input type="text" id="deskripsi" name="deskripsi" class="form-control">
            <div class="input-group-append">
              <button type="button" class="btn btn-danger btn-sm" onclick="clearDeskripsi()">
                <i class="far fa-trash-alt"></i>
                <span class="ml-2">Hapus</span>
              </button>
            </div>
          </div>
        </div>
      
      
        <div class="form-group text-center">
          <label for="harga">Harga:</label>
          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text">Rp</span>
            </div>
            <input type="text" id="harga" name="harga" onchange="formatNumber(this)" onkeyup="formatNumber(this)" placeholder="0" class="form-control">
            <div class="input-group-append">
              <button type="button" class="btn btn-danger btn-sm" onclick="clearHarga()">
                <i class="fa fa-times-circle" aria-hidden="true"></i>
                <span class="ml-2">Hapus</span>
              </button>
            </div>
          </div>
        </div>
      
      
        <div class="form-group text-center">
          <button type="button" class="btn btn-primary whatsapp-button" button type="button" onclick="tambah()">Tambahkan Belanja</button>
        </div>
      </form>
      
      <table id="tabel-belanja">
        <thead>
          <tr>
            <th>Tanggal</th>
            <th>Deskripsi Belanja</th>
            <th>Harga</th>
            <th>Aksi</th>
          </tr>
        </thead>
        <tbody>
        </tbody>
        <tfoot>
          <tr>
            <td colspan="2" class="total">Total:</td>
            <td id="total-harga" class="total">Rp 0</td>
            <td></td>
          </tr>
        </tfoot>
      
      </table>
      <br>
      <br>
      <center>
        <b>Catatan:</b><em>"ndak wajib download file nya yang, ini untuk kirim catatan otomatis ke wa sayang sendiri ---------- !!"</em>
        <td>
          <button type="button" class="btn btn-primary whatsapp-button" button onclick="download()">Download</button>
          <button type="button" class="btn btn-primary whatsapp-button" button onclick="kirimWhatsApp()" class="blink-black">Kirim WhatsApp</button>
        </td>
      </center>
      


<script>
    
    let belanjaan = [];

// Function untuk mengubah format angka menjadi format ribuan
function formatNumber(input) {
var num = input.value.replace(/\./g,'');
if (!isNaN(num)) {
num = Number(num).toLocaleString('id-ID');
input.value = num;
} else {
alert('Mohon masukkan angka saja');
input.value = input.value.replace(/[^\d\.]*/g,'');
}
}


function tambah() {
let tanggal = document.getElementById('tanggal').value;
let deskripsi = document.getElementById('deskripsi').value;
let harga = parseInt(document.getElementById('harga').value.replaceAll(".", ""));
if (tanggal && deskripsi && harga) {
belanjaan.push({
  tanggal: tanggal,
  deskripsi: deskripsi,
  harga: harga
});
tampilkanTabelBelanja();
document.getElementById('tanggal').value = '';
document.getElementById('deskripsi').value = '';
document.getElementById('harga').value = '';
} else {
alert('Sayang isi dulu yang lengkap {-_-}');
}
}

function clearDeskripsi() {
    document.getElementById("deskripsi").value = "";
}

function clearHarga() {
    document.getElementById("harga").value = "";
}

function hapus(index) {
belanjaan.splice(index, 1);
tampilkanTabelBelanja();
}

// Function untuk menampilkan tabel belanjaan
function tampilkanTabelBelanja() {
let tabelBelanja = document.getElementById('tabel-belanja').getElementsByTagName('tbody')[0];
let totalHarga = 0;
tabelBelanja.innerHTML = '';
belanjaan.forEach((belanja, index) => {
let row = tabelBelanja.insertRow();
let tanggalCell = row.insertCell(0);
let deskripsiCell = row.insertCell(1);
let hargaCell = row.insertCell(2);
let aksiCell = row.insertCell(3);

let tanggalArray = belanja.tanggal.split('-');
let tanggalText = '';
if (tanggalArray.length === 3) {
  tanggalText = document.createTextNode(`${tanggalArray[2]}-${tanggalArray[1]}-${tanggalArray[0]}`);
} else {
  tanggalText = document.createTextNode(belanja.tanggal);
}

let deskripsiText = document.createTextNode(belanja.deskripsi);
let hargaText = document.createTextNode(belanja.harga.toLocaleString());
let aksiBtn = document.createElement('button');
let aksiText = document.createTextNode('Hapus');
aksiBtn.appendChild(aksiText);
aksiBtn.setAttribute('onclick', 'hapus(' + index + ')');
tanggalCell.appendChild(tanggalText);
deskripsiCell.appendChild(deskripsiText);
hargaCell.appendChild(hargaText);
aksiCell.appendChild(aksiBtn);
totalHarga += belanja.harga;
});
let totalHargaElem = document.getElementById('total-harga');
totalHargaElem.innerHTML = totalHarga.toLocaleString();

let downloadBtn = document.getElementById('download');
downloadBtn.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(JSON.stringify(belanjaan)));
downloadBtn.setAttribute('download', 'belanjaan.txt');
}



function download() {
let rows = [];
let headers = ["Tanggal", "Deskripsi Belanja", "Harga"];
rows.push(headers);
belanjaan.forEach((belanja) => {
// Format tanggal menjadi format Indonesia
let formattedDate = new Date(belanja.tanggal).toLocaleDateString("id-ID", { day: "numeric", month: "numeric", year: "numeric" });
let row = [formattedDate, belanja.deskripsi, belanja.harga];
rows.push(row);
});
let csvContent = "data:text/csv;charset=utf-8,"
               + rows.map(e => e.join(",")).join("\n");

let encodedUri = encodeURI(csvContent);
let link = document.createElement("a");
link.setAttribute("href", encodedUri);
link.setAttribute("download", "lap Mawar.csv");
document.body.appendChild(link);
link.click();
document.body.removeChild(link);
}


function kirimWhatsApp() {
let nomorUrut = 1;
let text = "Catatan Belanjaan:\n";
let tabelBelanja = document.getElementById("tabel-belanja");
let rowLength = tabelBelanja.rows.length;
for (let i = 1; i < rowLength - 1; i++) {
let tanggal = tabelBelanja.rows[i].cells[0].innerHTML;
let deskripsi = tabelBelanja.rows[i].cells[1].innerHTML;
let harga = tabelBelanja.rows[i].cells[2].innerHTML;
text += `${nomorUrut}. ${tanggal} - ${deskripsi} - ${harga}\n`;
nomorUrut++;
}
let encodedText = encodeURIComponent(text);
let phoneNumber = "6285247502344";
let link = `https://api.whatsapp.com/send?phone=${phoneNumber}&text=${encodedText}`;

window.open(link, "_blank");
}





$(document).ready(function() {
$('#tanggal').datepicker({
format: 'dd/mm/yyyy',
autoclose: true,
todayHighlight: true,
orientation: 'bottom',
container: '.form-group.text-center'
});
});











</script>






    
</script>
</body>
</html>
